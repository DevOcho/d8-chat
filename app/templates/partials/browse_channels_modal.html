<div class="modal-header">
    <h5 class="modal-title">Browse Channels</h5>
    <button class="btn btn-success ms-auto me-2"
            hx-get="{{ url_for('main.get_create_channel_form') }}"
            hx-target="#htmx-modal-content">
        Create Channel
    </button>
    <button type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"></button>
</div>
<div class="modal-body">
    <!-- Search form -->
    <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-search"></i></span>
        <input class="form-control"
               type="search"
               name="q"
               placeholder="Search for channels to join"
               autocomplete="off"
               hx-get="{{ url_for('main.search_channels') }}"
               hx-trigger="keyup changed delay:300ms, search"
               hx-target="#joinable-channels-results"
               hx-indicator="#search-spinner">
    </div>

    <!-- HTMX loading indicator -->
    <div class="text-center">
        <div id="search-spinner" class="spinner-border htmx-indicator" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
    
    <!-- Container for the search results -->
    <div id="joinable-channels-results">
        {# On initial load, we include the first page of results #}
        {% include 'partials/joinable_channel_results.html' with context %}
    </div>
</div>
