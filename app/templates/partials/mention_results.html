<div class="list-group list-group-flush">
    {# [THE FIX] Render special mentions first #}
    {% for mention in special_mentions %}
        <button type="button"
                class="list-group-item list-group-item-action mention-suggestion-item p-2 {% if loop.first and not users %}active{% endif %}"
                data-username="{{ mention.username }}">
            <div class="d-flex align-items-center">
                <div class="flex-shrink-0">
                    <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
                         style="width: 24px;
                                height: 24px;
                                font-size: 0.8rem">
                        <i class="bi bi-broadcast-pin"></i>
                    </div>
                </div>
                <div class="flex-grow-1 ms-2">
                    <strong>{{ mention.display_name }}</strong>
                    <small class="text-muted d-block">{{ mention.description }}</small>
                </div>
            </div>
        </button>
    {% endfor %}
    {# Then render user mentions #}
    {% for user in users %}
        <button type="button"
                class="list-group-item list-group-item-action mention-suggestion-item p-2 {% if loop.first and not special_mentions %}active{% endif %}"
                data-username="{{ user.username }}">
            <div class="d-flex align-items-center">
                <div class="flex-shrink-0">
                    <div class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center"
                         style="width: 24px;
                                height: 24px;
                                font-size: 0.8rem">{{ (user.display_name or user.username)[0]|upper }}</div>
                </div>
                <div class="flex-grow-1 ms-2">
                    <strong class="me-2">{{ user.display_name or user.username }}</strong>
                    <br>
                    <small class="text-muted">{{ user.username }}</small>
                </div>
            </div>
        </button>
    {% else %}
        {# Only show "No results" if there are no special mentions either #}
        {% if not special_mentions %}<div class="list-group-item p-2 text-muted">No results found</div>{% endif %}
    {% endfor %}
</div>
