<!-- app/templates/partials/channel_details_tab_about.html -->
<div class="p-3">
    <!-- Topic and Description -->
    <div id="about-section-wrapper">{% include 'partials/channel_details_about_display.html' %}</div>
    <hr>
    <!-- Managed By -->
    <div class="mb-3">
        <strong class="text-muted d-block mb-1">Managed by</strong>
        <p>
            {% for admin in admins %}
                {{ admin.user.username }}
                {% if not loop.last %},{% endif %}
            {% endfor %}
        </p>
    </div>
    <!-- Created By -->
    <div class="mb-3">
        <strong class="text-muted d-block mb-1">Created by</strong>
        {% if channel.created_by %}
            <p>{{ channel.created_by.username }} on {{ channel.created_at.strftime("%B %d, %Y") }}</p>
        {% else %}
            <p>Creator information not available.</p>
        {% endif %}
    </div>
    <!-- Danger Zone -->
    {% if channel.name != 'announcements' %}
        <hr>
        <div class="mt-3">
            {% set is_sole_admin = (current_user_membership.role == 'admin' and admins|length == 1 and members_count > 1) %}
            {% if is_sole_admin %}
                <button class="btn btn-sm btn-outline-danger w-100"
                        disabled
                        data-bs-toggle="tooltip"
                        data-bs-placement="top"
                        title="You must promote another member to admin before you can leave this channel.">
                    Leave Channel
                </button>
                <small class="form-text text-muted d-block text-center mt-2">
                    You are the only admin. Promote another member to admin before you can leave.
                </small>
            {% else %}
                <button class="btn btn-sm btn-outline-danger w-100"
                        hx-post="{{ url_for('channels.leave_channel', channel_id=channel.id) }}"
                        hx-confirm="Are you sure you want to leave #{{ channel.name }}?"
                        title="Leave this channel">Leave Channel</button>
            {% endif %}
        </div>
    {% endif %}
</div>
