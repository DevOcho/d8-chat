{# app/templates/partials/thread_view.html #}
<div class="offcanvas-header">
    <div>
        <h5 class="offcanvas-title mb-0">Thread</h5>
        {% if channel %}<small class="text-muted d-block">In #{{ channel.name }}</small>{% endif %}
    </div>
    <button type="button"
            class="btn-close"
            data-bs-dismiss="offcanvas"
            aria-label="Close"></button>
</div>
<div class="offcanvas-body p-0 d-flex flex-column">
    <!-- Scrollable content area -->
    <div class="flex-grow-1" style="overflow-y: auto;">
        <!-- Parent Message -->
        <div class="p-3">
            {% with message=parent_message, is_in_thread_view=True %}
                {% include 'partials/message.html' %}
            {% endwith %}
        </div>
        <hr class="my-0">
        <!-- Replies -->
        <div class="p-3" id="thread-replies-list-{{ parent_message.id }}">
            {% for reply in thread_replies %}
                {% with message=reply, is_in_thread_view=True %}
                    {% include 'partials/message.html' %}
                {% endwith %}
            {% else %}
                <p class="text-muted text-center small">No replies yet.</p>
            {% endfor %}
        </div>
    </div>
    <!-- Reply Input (Fixed at the bottom) -->
    <div class="flex-shrink-0"
         hx-get="{{ url_for('main.get_thread_chat_input', parent_message_id=parent_message.id) }}"
         hx-trigger="load"
         hx-swap="outerHTML">
        <div class="p-3 text-center">
            <div class="spinner-border spinner-border-sm"></div>
        </div>
    </div>
</div>
