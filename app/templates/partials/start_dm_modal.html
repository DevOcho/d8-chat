<div class="modal-header">
    <h5 class="modal-title" id="startDmModalLabel">Direct Messages</h5>
    <button type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"></button>
</div>
<div class="modal-body">
    <!-- Search form -->
    <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-search"></i></span>
        <input class="form-control"
               type="search"
               name="q"
               placeholder="Search for people to message"
               autocomplete="off"
               hx-get="{{ url_for('main.search_users_for_dm') }}"
               hx-trigger="keyup changed delay:300ms, search"
               hx-target="#dm-user-results"
               hx-indicator="#search-spinner">
    </div>
    <!-- HTMX loading indicator -->
    <div class="text-center">
        <div id="search-spinner"
             class="spinner-border htmx-indicator"
             role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
    <!-- Container for the search results -->
    <div id="dm-user-results">
        {# On initial load, we include the first page of results #}
        {% include 'partials/dm_user_results.html' with context %}
    </div>
</div>
