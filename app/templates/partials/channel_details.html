<div id="channel-details-content">
    <h5 class="mb-0">#{{ channel.name }}</h5>
    <hr />

    <!-- About Section -->
    <div id="about-section-wrapper">
        {% include 'partials/channel_details_about_display.html' %}
    </div>

    <!-- Members Section -->
    <div class="mb-4">
        <h6 class="text-muted">Members ({{ current_members|length }})</h6>
        <ul class="list-group list-group-flush">
            {% for member in current_members %}
                <li class="list-group-item d-flex align-items-center px-0">
                    <div class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center me-2"
                         style="width: 24px; height: 24px; font-size: 0.8rem;">
                         {{ member.user.username[0]|upper }}
                    </div>
                    <span>{{ member.user.username }}</span>
                    {% if member.role == 'admin' %}
                        <span class="badge bg-primary ms-auto">Admin</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Invite New Members Section -->
    {% if not channel.invites_restricted_to_admins or current_user_membership.role == 'admin' %}
    <div>
        <h6 class="text-muted">Add Members</h6>
        <form hx-post="{{ url_for('main.add_channel_member', channel_id=channel.id) }}"
              hx-target="#channel-details-content"
              hx-swap="innerHTML">
            <div class="input-group">
                <select name="user_id" class="form-select" required>
                    <option value="" selected disabled>Choose a user...</option>
                    {% for user in users_to_invite %}
                        <option value="{{ user.id }}">{{ user.username }}</option>
                    {% endfor %}
                </select>
                <button class="btn btn-success" type="submit">Add</button>
            </div>
            {% if users_to_invite|length == 0 %}
                <p class="text-muted small mt-2">All workspace users are already in this channel.</p>
            {% endif %}
        </form>
    </div>
    {% endif %}

</div>
